<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Theeni Pandaram</title>
  <!-- materialize icons, css & js -->
  <link type="text/css" href="css/materialize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link type="text/css" href="css/styles.css" rel="stylesheet">
  <script type="text/javascript" src="js/materialize.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
</head>

<body class="grey lighten-4">
  <script type="text/javascript">
    $(function () {
      $.get("http://localhost:5000/api/v1.0?diet=vegetarian&planfor=week", function (data, status) {

        var jsonData = JSON.parse(JSON.stringify(data));

        console.log(jsonData);
        for (const byDay in jsonData) {
          console.log("by day");
          console.log(byDay);
          console.log(jsonData[byDay]);
          var day = jsonData[byDay];
          
          $("#recipes").append('<h2 class="first-letter">' + byDay + '</h2>');
          for (const x in day) {
            console.log(day)
            var meal = day[x];
            console.log(meal)
            mealHeader = '<h3 class="first-letter">' + meal["time"] + '</h3>'
            $("#recipes").append(mealHeader);

            var mealItems = meal["items"];
            console.log("mealItems");
            console.log(mealItems);
            var mealNames = '';
            for (let i = 0; i < mealItems.length; i++) {
              var divHtml =
                '<div class="card-panel recipe white row"><div class="recipe-details"><div class="recipe-title">' + mealItems[i]["name"] + '</div></div><div class="recipe-delete"><i class="material-icons" id="refresh" link="http://localhost:5500/api/v1.0?time=meal["time"]">refresh</i></div></div>'
              $("#recipes").append(divHtml);
            }
          }
        }
      });

    });
  </script>
  <!-- top nav -->
  <nav class="z-depth-0">
    <div class="nav-wrapper container">
      <a href="/">Theeni<span>Pandaram</span></a>
      <span class="right grey-text text-darken-1">
        <i class="material-icons sidenav-trigger" data-target="side-menu">menu</i>
      </span>
    </div>
  </nav>

  <div class="center grey-text text-darken-1">
    <a class="waves-effect waves-light btn-small">Vegetarian</a>
    <a class="waves-effect waves-light btn-small disabled">Non Vegetarian</a>
  </div>

  <!-- side nav -->
  <ul id="side-menu" class="sidenav side-menu">
    <li><a class="subheader">Theeni Pandaram</a></li>
    <li><a href="index.html" class="waves-effect">Home</a></li>
    <li><a href="pages/about.html" class="waves-effect">About</a></li>
    <li>
      <div class="divider"></div>
    </li>
    <li><a href="pages/contact.html" class="waves-effect">
        <i class="material-icons">mail_outline</i>Contact</a>
    </li>
  </ul>

  <br><br>

  <div class="center">
    Help me plan for
    <form action="#">
      <p>
        <label>
          <input name="group1" type="radio" />
          <span>A single meal</span>
        </label>
      </p>
      <p>
        <label>
          <input name="group1" type="radio" checked />
          <span>A day (3 meals)</span>
        </label>
      </p>
      <p>
        <label>
          <input class="with-gap" name="group1" type="radio" />
          <span>A week (5 days of food)</span>
        </label>
      </p>
    </form>
  </div>

  <!-- recipes -->
  <div class="recipes container grey-text text-darken-1" id="recipes">
    <!-- <div class="card-panel recipe white row">
      <div class="recipe-details">
        <div class="recipe-title">Mudha Pongal, Vangi Budith</div>
      </div>
      <div class="recipe-delete">
        <i class="material-icons" id="refresh">refresh</i>
      </div>
    </div>
    <div class="card-panel recipe white row">
      <div class="recipe-details">
        <div class="recipe-title">Sambar, Pilchar, Kidney beans ambad, Carrot and Cabbage poriyal</div>
      </div>
      <div class="recipe-delete">
        <i class="material-icons">refresh</i>
      </div>
    </div>
    <div class="card-panel recipe white row">
      
      <div class="recipe-details">
        <div class="recipe-title">Orange fruit</div>
        
      </div>
      <div class="recipe-delete">
        <i class="material-icons">refresh</i>
      </div>
    </div>
    <div class="card-panel recipe white row">
      
      <div class="recipe-details">
        <div class="recipe-title">Dhida, Alla chutney</div>
      
      </div>
      <div class="recipe-delete">
        <i class="material-icons">refresh</i>
      </div>
    </div> -->
  </div>

  <div class="center">
    <a class="btn-floating btn-small btn-large add-btn sidenav-trigger" data-target="side-form">
      <i class="material-icons">add</i>
    </a>
  </div>

  <!-- add recipe side nav -->
  <div id="side-form" class="sidenav side-form">
    <form class="add-recipe container section">
      <h6>Feedback please!</h6>
      <div class="divider"></div>
      <div class="input-field">
        <input placeholder="e.g. Limbu Bhath" id="title" type="text" class="validate">
        <label for="title">Recipe Title</label>
      </div>
      <div class="input-field">
        <input placeholder="e.g. Lemon, Raw rice, oil" id="ingredients" type="text" class="validate">
        <label for="ingredients">Ingredients</label>
      </div>
      <div class="input-field center">
        <button class="btn-small">Add</button>
      </div>
    </form>
  </div>

  <!-- TODO: feedback form - Name, Whatsapp number, Email, Feedback -->

  <script src="js/ui.js"></script>
</body>

</html>